---
layout: base.njk
pagination:
    data: grounds
    size: 1
    alias: ground
permalink: "ground/{{ ground.region | slugify }}/{{ ground.name | slug }}/index.html"
eleventyComputed:
    title: "{{ ground.name | safe }} | {{ meta.title }}"
    description: "Information about the non-league football ground, {{ ground.name }}, with maps, address and contact information."
---

{% from "macros.njk" import staticmap as google %}
{% from "macros.njk" import fc %}

{% set club = "" %}

{% for c in clubs %}
  {% if c.ground == ground.name %}
    {% set club = c %}
  {% endif %}
{% endfor %}

<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "StadiumOrArena",
    "name": "{{ ground.name }}",
    "maximumAttendeeCapacity": "{{ ground.capacity }}",
    "latitude": "{{ ground.latitude }}",
    "longitude": "{{ ground.longitude }}",
    "identifier": {
      "@type": "url",
      "@id": "{{ meta.base }}/ground/{{ ground.region | slugify }}/{{ ground.name | slugify }}"
    },
    {%- if ground.sponsor %}
      "sponsor": "{{ ground.sponsor }}",
    {%- endif %}
    "address": {
      "@type": "PostalAddress",
      {%- if ground.street %}"streetAddress": "{{ ground.street }}",{%- endif %}
      "addressLocality": "{{ ground.locality }}",
      "addressRegion": "{{ ground.region }}",
      "postalCode": "{{ ground.postcode }}",
      "addressCountry": {
        "@type": "Country",
        "name": "GB"
      }
    },
    {%- if ground.sponsor %}
      "sponsor": {
        "@type": "Organization",
        "name": "{{ ground.sponsor | replace(ground.name, '') | trim}}"
      }
    {%- endif %}
  }
</script>

<header class="container-fluid hero" id="{{ ground.name | slugify }}" data-theme="dark">
  <div class="container">
    <h1>
      {{ ground.name | replace(" ", "\n") | nl2br | safe }}
    </h1>
  </div>
</header>

<main class="container">
  <div class="grid">
    <section>
      <h3>Overview</h3>
      <p>
        {% if ground.sponsor %}
          <strong>{{ ground.sponsor }}</strong> (also known as {{ ground.name }}) is a football ground in {{ ground.locality }}, {{ ground.region }}.
        {% else %}
          <strong>{{ ground.name }}</strong> is a football ground {% if ground.locality %} in {{ ground.locality }}, {{ground.region}}{%endif%}.
        {% endif %}
        The current capacity of the ground is <a href="/ground/#{{ ground.name | slugify }}">{{ ground.capacity | commaNumber }}</a>
          {%- if ground.surface %}, with a pitch surface of {{ ground.surface -}}
          {% endif -%}.
          </p>
        <p>
           It is the home ground of <a href="/club/{{ club.name | slugify }}">{{- fc(club.name) -}}</a>.
        </p>
        <h4>Information</h4>
        <table role="grid">
          <tr>
            <th>Name</th>
            <td>
              {{ ground.name }}
            </td>
          </tr>
          {% if ground.sponsor %}
            <tr>
              <th>Sponsor</th>
              <td>
                {{ ground.sponsor }}
              </td>
            </tr>
          {% endif %}
          <tr>
            <th>Home of</th>
            <td>
              {{ fc(club.name, true) }}
            </td>
          </tr>
          {% if ground.street %}
            {% if ground.street != ground.name %}
              <tr>
                <th>Street</th>
                <td>
                  {{ ground.street }}
                </td>
              </tr>
            {% endif %}
          {% endif %}
          <tr>
            <th>Town</th>
            <td>
              {{ ground.locality | upper }}
            </td>
          </tr>
          <tr>
            <th>County</th>
            <td>
              {{ ground.region }}
            </td>
          </tr>
          <tr>
            <th>Postcode</th>
            <td>
              {{ ground.postcode | upper }}
            </td>
          </tr>
        </table>
        <h4>Nearby grounds</h4>
        <ul>
          {% for away in grounds %}
            {# Call distance shortcode to determine mile distance between 
              latitude and longitude of home and away grounds
            #}
            {% set distance %}
            {% distance
            ground.latitude,
            ground.longitude,
            away.latitude,
            away.longitude
 %}
            {% endset %}
            {# Select grounds within 20 mile radius #}
            {% if distance < 20 and away.name != ground.name %}
              <li>
                {% for c in clubs %}
                  {% if c.ground == away.name %}
                    <a href="/club/{{ c.name | slugify }}">{{ fc(c.name) }}</a>
                  {% endif %}
                {% endfor %} at 
                <a href="/ground/{{away.region|slugify}}/{{away.name|slugify}}">{{ away.name }}</a>
                ({{ distance | round(1) }} mi)
              </li>
              {% endif%}
            {% endfor %}
          </ul>
        </section>
        <aside>
          <figure>
            {%- set address -%}
            {{ ground.name | replace("'", "") | urlencode -}},{{- ground.locality | urlencode }},{{ ground.region | urlencode }},{{ ground.postcode | urlencode }}
            {%- endset -%}
            {%- set key = env.google_maps_api_key -%}

            <img 
            src="{{- google(address, 'roadmap', 17, 640, 480, 'png', 1, key) -}}" 
            srcset="{{- google(address, 'roadmap', 17, 640, 480, 'png', 1, key) }} 1x,
                    {{ google(address, 'roadmap', 17, 640, 480, 'png', 2, key) }} 2x"
            width="640" 
            height="480"
            alt="Map showing the location of {{ ground.name }} in {{ ground.locality }}, {{ ground.region }}."
          >
            <figcaption>
              <small>Google Map of {{ ground.name }}, {{ ground.locality }}</small>
            </figcaption>
          </figure>
          <figure>
            <img src="https://dev.virtualearth.net/REST/v1/Imagery/Map/AerialWithLabels/{{ground.latitude}},{{ground.longitude}}/18?mapSize=640,480&query={{ground.name | urlencode}}&mapLayer=Basemap,Buildings&format=jpeg&mapMetadata=0&key={{ env.bing_maps_api_key }}">
            <figcaption>
              <small>Bing Aerial view of {{ ground.name }}, {{ ground.locality }}</small>
            </figcaption>
          </figure>
          {% set address -%}
          {%- if ground.sponsor -%}{{- ground.sponsor -}},
        {%- endif -%}{{- ground.name | urlencode }},{{ ground.locality | urlencode }},{{ ground.postcode | urlencode }},United%20Kingdom
        {%- endset %}
          {% set zoom = 18 %}
          <p>
            <a 
            href="https://www.google.com/maps/search/?api=1&zoom={{zoom}}&query={{address}}&basemap=roadmap" 
            target="_blank" 
            role="button" 
            aria-label="Open in Google Maps">Google Maps</a>
            <a 
            href="http://maps.apple.com/?q={{address}}&sll={{ground.latitude}},{{ground.longitude}}&z={{zoom}}&t=m"
            target="_blank" 
            role="button" 
            aria-label="Open in Apple Maps">Apple Maps</a>
            <a 
            href="http://www.openstreetmap.org/#map={{zoom}}/{{ground.latitude}}/{{ground.longitude}}"
            target="_blank" 
            role="button" 
            aria-label="Open in Open Street Maps">OpenStreetMap</a>
          </p>
        </aside>
      </div>
    </main>