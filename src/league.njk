---
layout: base.njk
pagination:
    data: leagues
    size: 1
    alias: league
permalink: "leagues/{{ league.name | slugify }}/index.html"
eleventyComputed:
    title: "Clubs in the {{ league.sponsor.name | safe }} {{ league.name | safe }}"
    description: The {{ league.sponsor.name }} {{ league.name }} is the {{ league.additionalProperty.@value | ordinal }} tier of the English football pyramid, with a total of {{ league.members | length }} clubs"
---

{% from "credit.macro.njk" import credit %}
{% from "hero.macro.njk" import hero %}
{% from "breadcrumb.macro.njk" import breadcrumb %}

<script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "SportsOrganization",
        "name": "{{ league.name }}",
        "alternateName": "{{ league.alternateName }}",
        "logo": "{{ league.logo.contentURL }}",
        "sponsor": {
            "@type": "Organization",
            "name": "{{ league.sponsor.name }}"
        },
        "url": "{{ league.url }}",
        "identifier": {
            "@type": "url",
            "@value": "{{ meta.base }}/leagues/{{ league.name | slugify }}"
        },
        "member": [
        {%- for club in league.members %}
            {
                "@type": "SportsTeam",
                "name": "{{ club.name }}",
                "slogan": "{{ club.slogan }}",
                "logo": "{{ club.logo.contentURL }}",
                "url": "{{ club.url }}",
                "identifier": {
                    "@type": "url",
                    "@value": "{{ meta.base }}/clubs/{{ club.name | slugify }}"
                }
            }{% if not loop.last %},{% endif %}
        {%- endfor %}
      ],
    }
</script>


{% set subtitle %}
The {{ league.name }} is at the {{ league.additionalProperty.@value | ordinal }} tier of the English football pyramid, with a total of {{ league.members.length | toWords }} clubs
{% endset %}


{%- set markers %}
{%- for club in league.members %}
&markers=size:tiny|color:white|{{ club.location.latitude }},{{ club.location.longitude }}
{%- endfor %}
{%- endset %}
{%- set key = env.google_maps_api_key -%}
{% set url %}
https://maps.googleapis.com/maps/api/staticmap?size=1280x720&maptype=satellite&scale=2&markers={{- markers | safe -}}&key={{key}}
{% endset %}
{% set caption = "Map of " + league.name + " clubs" %}

{{ hero(league.alternateName, subtitle, url, caption ) }}
{{ breadcrumb("Leagues", league.name) }}

<section class="section">
  <div class="container is-max-desktop">
    <div class="columns">
      {% for clubs in league.members | sort | batch(8)  %}
        <div class="column is-one-third">
          {% for club in clubs %}
            <article class="media">
              <figure class="media-left">
                <p class="image is-48x48">
                  {% crest club.logo.contentURL, club.logo.caption, club.name  %}
                </p>
              </figure>
              <div class="media-content">
                <div class="content">
                  <a href="/leagues/{{ league.name | slugify }}/{{ club.name | slugify }}">
                    <h3 class="has-text-weight-semibold">
                      {{- club.name -}}
                    </h3>
                  </a>
                  <small class="has-text-dark-gray">
                    {{- club.slogan -}}
                  </small>
                </div>
              </div>
            </article>
          {% endfor %}
        </div>
      {% endfor %}
    </div>
  </div>
</section>
