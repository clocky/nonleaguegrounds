---
layout: base.njk
pagination:
    data: leagues
    size: 1
    alias: league
permalink: "league/{{ league.name | slugify }}/index.html"
eleventyComputed:
    title: "Clubs in the {{ league.sponsor | safe }} {{ league.name | safe }}"
    description: The {{ league.sponsor }} {{ league.name }} is the {{ league.tier | ordinal }} tier of the English football pyramid, with a total of {{ league.clubs.length }} clubs"
---
{% from "macros.njk" import emoji %}

{%- set markers -%}
{%- for club in league.clubs -%}
    {%- for c in clubs -%}
        {%- if c.name == club.name -%}
            {%- for g in grounds -%}
                {%- if c.ground == g.name -%}
                    &markers=size:mid|label:{{club.name.slice(0,1) | upper }}|{{ g.latitude }},{{ g.longitude }}
                {%- endif -%}
            {%- endfor -%}
        {%- endif -%}
    {%- endfor -%}
{%- endfor -%}
{%- endset -%}
{%- set key = env.google_maps_api_key -%}

<script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "{{ league.name }}",
        "alternateName": "{{ league.sponsor }}
 {{ league.name }}",
 "sponsor": "{{ league.sponsor }}",
        "url": "https://{{ league.url }}"
    }
</script>

<header class="container-fluid hero" id="league" data-theme="dark">
    <div class="container">
        <h1>{{ league.sponsor }}<br/>
            {{ league.name }}</h1>
        <div class="grid">
            <h5>The {{ league.name }} is the {{ league.tier | ordinal }} tier of the
                English football pyramid, with a total of
                {{ league.clubs.length }} clubs</h5>
            <p></p>
        </div>
    </div>
</header>

<main class="container">

    <div class="grid">
        <table role="grid">
            <thead>
                <tr>
                    <th scope="col">Club</th>
                    <th scope="col">Nickname</th>
                </tr>
            </thead>
            <tbody>
                {% for club in league.clubs %}
                    <tr>
                        <th>
                            <a href="/club/{{ club.name | slugify }}">{{ club.name }}</a>
                        </th>
                        {% for c in clubs %}
                            {% if c.name == club.name %}
                                <td>
                                    {{ emoji(c.nickname) }}{{ c.nickname }}</td>
                            {% endif %}
                        {% endfor %}
                    </tr>
                {% endfor %}
            </tbody>
        </table>
        <figure class="container-fluid">
            {% set caption = "Map of " + league.name + " clubs" %}
            <figcaption>
                <small>{{ caption }}</small>
            </figcaption>
            <img src="https://maps.googleapis.com/maps/api/staticmap?size=640x640&scale=2&markers={{ markers }}&key={{key}}" alt="{{ caption }}">
        </figure>
    </div>
    <footer>
        <small>
        Photo by <a href="https://unsplash.com/@fkaregan?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Samuel Regan-Asante</a> on <a href="https://unsplash.com/s/photos/non-league?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Unsplash</a>
        </small>
    </footer>
</main>