---
layout: base.njk
pagination:
    data: leagues
    size: 1
    alias: league
permalink: "leagues/{{ league.name | slugify }}/index.html"
eleventyComputed:
    title: "Clubs in the {{ league.sponsor.name | safe }} {{ league.name | safe }}"
    description: The {{ league.sponsor.name }} {{ league.name }} is the {{ league.additionalProperty.@value | ordinal }} tier of the English football pyramid, with a total of {{ league.members | length }} clubs"
---

{% from "credit.macro.njk" import credit %}
{% from "breadcrumb.macro.njk" import breadcrumb %}

<script type="application/ld+json">
{{ league | dump | safe }}
</script>

{% set subtitle %}
{% endset %}

{%- set pushpins -%}
{%- for club in league.members -%}
  {%- if club.location.latitude and club.location.longitude %}&pp={{- club.location.latitude -}},{{- club.location.longitude -}};36{%- endif -%}
{%- endfor -%}
{%- endset -%}
{%- set bing = env.bing_maps_api_key -%}

<section class="hero is-medium is-dark has-background">
  {% hero "https://dev.virtualearth.net/REST/v1/Imagery/Map/Aerial?mapSize=1440,435" + pushpins + "&format=png&mapMetadata=0&key=" + bing,
  league.name %}
  <div class="hero-body">
    <div class="container is-max-desktop">
      <div class="columns">
        <div class="column is-two-thirds">
          <h1 class="title is-size-1 is-size-2-tablet is-size-3-mobile has-text-weight-bold has-text-left">
            {{ league.alternateName }}
          </h1>
          <h2 class="subtitle is-size-4 is-size-5-tablet is-size-6-mobile has-text-left">
            The {{ league.name }} is at the {{ league.additionalProperty.@value | ordinal }} tier of the English football pyramid, with a total of {{ league.members.length | toWords }} clubs
          </h2>
        </div>
      </div>
    </div>
  </div>
</section>
{{ breadcrumb("Leagues", league.name) }}

<section class="section">
  <div class="container is-max-desktop">
    <div class="columns">
      {% for clubs in league.members | sort | batch(8)  %}
        <div class="column is-one-third">
          {% for club in clubs %}
            <article class="media">
              <figure class="media-left">
                <p class="image is-48x48">
                  {% crest club.logo.contentURL, club.logo.caption, club.name  %}
                </p>
              </figure>
              <div class="media-content">
                <div class="content">
                  <a href="/leagues/{{ league.name | slugify }}/{{ club.name | slugify }}">
                    <h3 class="has-text-weight-semibold">
                      {{- club.name -}}
                    </h3>
                  </a>
                  <small class="has-text-dark-gray">
                    {{- club.slogan -}}
                  </small>
                </div>
              </div>
            </article>
          {% endfor %}
        </div>
      {% endfor %}
    </div>
  </div>
</section>
