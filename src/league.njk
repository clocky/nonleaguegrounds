---
layout: base.njk
pagination:
    data: leagues
    size: 1
    alias: league
permalink: "/{{ league.name | slugify }}/index.html"
eleventyComputed:
    title: "Clubs in the {{ league.alternateName | safe }}"
    description: The {{ league.alternateName }} is the {{ league.additionalProperty.@value | ordinal }} tier of the English football pyramid, with a total of {{ league.members.length }} clubs"
---
{% from "macros.njk" import emoji %}

{%- set markers -%}
{%- for club in league.members -%}
   &markers=size:mid|label:{{club.name.slice(0,1) | upper }}|{{ club.location.latitude }},{{ club.location.longitude }}
{%- endfor -%}
{%- endset -%}
{%- set key = env.google_maps_api_key -%}

<script type="application/ld+json">
{{ league | dump | safe}}
</script>

<header class="container-fluid hero" id="league" data-theme="dark">
  <div class="container">
    <h1>{{ league.alternateName }}</h1>
    <div class="grid">
      <p>
        <strong>
          The {{ league.name }} is at the {{ league.additionalProperty.@value | ordinal }} tier of the
          English football pyramid, with a total of
          {{ league.members.length }} clubs
        </strong>
      </p>
      <p>
      </p>
    </div>
  </div>
</header>

<main class="container">
  <div class="grid">
    <table role="grid">
      <thead>
        <tr>
          <th scope="col">Club</th>
          <th scope="col">Nickname</th>
        </tr>
      </thead>
      <tbody>
        {% for club in league.members %}
          <tr>
            <th>
              <a href="/{{ league.name | slugify }}/{{ club.name | slugify }}">
                {{ club.name }}
              </a>
            </th>
            <td>
              <span class="emoji">
                {{- emoji(club.slogan) -}}
              </span>
              {{ club.slogan -}}
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
    <figure class="container-fluid">
      {% set caption = "Map of " + league.name + " clubs" %}
      <figcaption>
        <small>
          {{ caption }}
        </small>
      </figcaption>
      <img 
        src="https://maps.googleapis.com/maps/api/staticmap?size=640x640&scale=2&markers={{ markers }}&key={{key}}" 
        alt="{{ caption }}"
      >
    </figure>
  </div>
  <footer>
    <small>
      Photo by <a href="https://unsplash.com/@fkaregan?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Samuel Regan-Asante</a> on <a href="https://unsplash.com/s/photos/non-league?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Unsplash</a>
    </small>
  </footer>
</main>