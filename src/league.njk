---
pagination:
    data: leagues
    size: 1
    alias: league
permalink: "/leagues/{{ league.name | slugify }}/index.html"
eleventyComputed:
    title: "Clubs in the {{ league.alternateName | safe }}"
    description: "The {{ league.name }} is at the {{ league.additionalProperty.@value | ordinal }} tier of the English football pyramid, with a total of {{ league.members.length }} clubs"
---
{% extends "./_layouts/base.njk" %}

{% from "emoji.macro.njk" import emoji %}
{% from "breadcrumb.macro.njk" import breadcrumb %}
{% from "hero.macro.njk" import hero %}
{% from "unsplash.macro.njk" import unsplash %}

{%- set markers -%}
{%- for club in league.members -%}
   &markers=size:mid|label:{{club.name.slice(0,1) | upper }}|{{ club.location.latitude }},{{ club.location.longitude }}
{%- endfor -%}
{%- endset -%}
{%- set key = env.google_maps_api_key -%}

{%- block link %}
  <link rel="preconnect" href="https://maps.googleapis.com"/>
  <link rel="preload" as="image" href="/img/{{ meta.hero['leagues'].src }}.jpg"/>
  <link rel="canonical" href="{{ meta.base }}/leagues/{{ league.name | slugify }}">
{%- endblock %}

{%- block css %}{%- endblock %}

{%- block script %}
  <script type="application/ld+json">
    {{ league | dump | safe }}
  </script>
{%- endblock %}

{% block header %}
  {%- set subtitle %}
    The {{ league.name }} is at the {{ league.additionalProperty.@value | ordinal }} tier of the English football pyramid, with a total of {{ league.members.length }} clubs
  {%- endset %}
  {{- hero(league.alternateName, description, meta.hero['leagues'].src) }}

{% endblock %}

{% block breadcrumb %}
  {{- breadcrumb("Leagues", league.name) }}
{% endblock %}

{% block main %}
  <main class="container">
    <div class="columns is-half">
      <table class="{{ meta.class.table }} column">
        <thead>
          <tr>
            <th scope="col">Club</th>
            <th scope="col" class="is-hidden-mobile">Nickname</th>
          </tr>
        </thead>
        <tbody>
          {%- for club in league.members %}
            <tr>
              <th scope="row">
                <a href="/leagues/{{ league.name | slugify }}/{{ club.name | slugify }}">
                  {{- club.name -}}
                </a>
              </th>
              <td class="is-hidden-mobile">
                <span role="img" class="has-text-black">
                  {{- emoji(club.slogan) -}}
                </span>
                <span class="has-text-grey-dark">{{ club.slogan -}}</span>
              </td>
            </tr>
          {%- endfor %}
        </tbody>
      </table>
      <figure class="column is-half">
        {% set caption = "Map of " + league.name + " clubs" %}
        <img 
        src="https://maps.googleapis.com/maps/api/staticmap?size=640x640&scale=2&markers={{ markers }}&key={{key}}" 
        alt="{{ caption }}"
      >
        <figcaption>
          <small>
            {{- caption -}}
          </small>
        </figcaption>
      </figure>
    </div>
  </main>
  {{ unsplash(meta.hero["leagues"]) }}
{% endblock %}