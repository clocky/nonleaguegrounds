<script webc:setup>
  const w = 48;
  const h = 48;
</script>

<template webc:type="11ty">
  <article class="media" itemscope itemtype="https://schema.org/Person">

    <figure class="media-left">
    <!-- If there's an Image attribute-->
      <p :class="`image is-${w}x${h}`">
        <!-- If it's not null, and there's an asset URL and hotspot -->
        <img 
          webc:if="person.image.contentUrl && person.image.hotspot" 
          class="is-rounded"
          :src="`${person.image.contentUrl}?w=${w*2}&h=${h*2}&fit=crop&crop=focalpoint&fp-x=${person.image.hotspot.x}&fp-y=${person.image.hotspot.y}`"
          :alt="`Photograph of ${person.name}`"
        ></img>
        <span webc:if="!person.image.contentUrl" class="has-background-white-ter is-inline-block">
          <span class="icon is-large">
            <i class="fa-solid fa-user fa-xl has-text-info"></i>
          </span>
        </span>
      </p>
    </figure>

    <div class="media-content">
      <div class="content pt-1">
        <!-- Show an icon if the person has a credential such as UEFA Pro -->
        <h3 webc:if="person.hasCredential" class="is-size-6 mb-1">
          <span webc:nokeep @text="person.name" itemprop="name"></span>
          <span webc:keep class="icon is-small has-tooltip-arrow" :data-tooltip="person.hasCredential.name">
            <i class="fa-solid fa-award has-text-info" ></i>
          </span>
        </h3>
        <!-- Just render their name if not-->
        <h3 
          webc:else 
          class="is-size-6 mt-0 mb-0" 
          @text="person.name" 
            itemprop="name">[person.name]</h3>
        <p>
          <span
            class="is-size-6 has-text-gray"
            webc:if="person.worksFor">
            <span @text="person.jobTitle">[person.jobTitle]</span>
              at
            <a 
              :href="`/leagues/${person.worksFor.memberOf.slug.current}/${person.worksFor.slug.current}/`" 
              @text="person.worksFor.name"
            >[person.worksFor.name]</a>
          </span>
          <span
            webc:else
            class="is-size-6 has-text-gray"
            itemprop="jobTitle"
            @text="person.jobTitle"></span>
          </span>
        </p>
      </div>
    </div> 
  </article>
</template>

