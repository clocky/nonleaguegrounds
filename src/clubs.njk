---js
{
    layout: "base.njk",
    pagination: {
        data: "clubs",
        size: 30,
        before: function(data) {
            return data.sort((a,b) => ('' + a.name).localeCompare(b.name));
        },
        reverse: false,
    },
    eleventyComputed: {
        title: "Non-League Clubs | Page {{ pagination.pageNumber + 1 }}",
        description: "A page of a directory of {{ clubs.length }} English non-league clubs, sorted alphabetically.",
        next: "{{ pagination.href.next }}",
        previous: "{{ pagination.href.previous }}",
    },
}
---

{% from "credit.macro.njk" import credit %}
{% from "hero.macro.njk" import hero %}

{{ hero("Clubs", "A directory of " + clubs.length + " non-league clubs, sorted alphabetically", meta.image.club, "A crowd of people cheering at a football game or a concert, with a focus on two fans holding their arms aloft") }}

<section class="section">
    <div class="container is-max-desktop">
        <table class="table is-fullwidth">
            <thead>
                <tr>
                    <th scope="col">Club</th>
                    <th scope="col" class="is-hidden-mobile">Ground</th>
                    <th scope="col" class="is-hidden-touch">League</th>
                </tr>
            </thead>
            <tbody>
                {% for club in pagination.items | sort(attribute = "name") %}
                    <tr>
                        <th class="media" scope="row">
                            <figure class="media-left">
                                <span class="image is-24x24">
                                    {% crest club.logo.contentURL,
                                    club.logo.caption,
                                    club.name %}
                                </span>
                            </figure>
                            <div class="media-content">
                                <a href="/clubs/{{ club.name | slugify }}" class="has-text-weight-semibold">{{ club.name }}</a>
                            </div>
                        </th>
                        <td class="is-hidden-mobile">
                            <a 
                                href="/grounds/{{ club.location.areaServed | slugify }}/{{ club.location.name | slugify }}"
                                class="has-text-grey-dark is-underlined"
                            >{{ club.location.name }}</a>
                        </td>
                        <td class="is-hidden-touch">
                            <span class="has-text-grey-dark">{{ club.memberOf.name }}</span>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</section>

<section class="section">
    <div class="container is-max-desktop">
        <nav class="pagination" aria-label="pagination">
            {% if not pagination.previous %}
                <span class="pagination-previous" disabled>Previous</span>
            {% else %}
                <a class="pagination-previous" href="{{ pagination.href.previous }}">Previous</a>
            {% endif %}
            {% if not pagination.next %}
                <span class="pagination-next" disabled>Next</span>
            {% else %}
                <a class="pagination-next" href="{{ pagination.href.next }}">Next page</a>
            {% endif %}
            <ul class="pagination-list">
                {% for href in pagination.hrefs %}
                    <li>
                        {% if loop.index0 == pagination.pageNumber %}
                            <a class="pagination-link is-current" aria-label="Page {{ loop.index }}" aria-current="page" href="{{ href }}">{{ loop.index }}</a>
                        {% else %}
                            <a class="pagination-link" aria-label="Go to page {{ loop.index }}" href="{{ href }}">{{ loop.index }}</a>
                        {% endif %}
                    </li>
                {% endfor %}
            </ul>
        </nav>
    </div>
</section>

{{ credit("nickxshotz", "Nicholas Green", "Soccer Crowd") }}